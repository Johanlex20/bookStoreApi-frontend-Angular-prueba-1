<div *ngIf="form">
    <h1>
        {{ user ? 'Editar ': 'Crear ' }} Usuario
    </h1>

    <div class="mt-5 alert alert-danger" *ngIf="errors.length">
        <ul>
            <li *ngFor="let error of errors"> {{ error }} </li>
        </ul>
    </div>

    <form class="mt-5" [formGroup]="form" autocomplete="off" (ngSubmit)="save()">
        <mat-form-field class="mb-3 w-100" appearance="outline">
            <mat-label for="firstName">Nombre</mat-label>
            <input matInput id="firstName" type="text" placeholder="Nombre" formControlName="firstName">
            <mat-error>
                <ng-container *ngIf="controlHasError('firstName','required')">
                    El Nombre es obligatorio
                </ng-container>
                <ng-container *ngIf="controlHasError('firstName', 'minlength')">
                    El Nombre debe tener minimo 3 caracteres
                </ng-container>
                <ng-container *ngIf="controlHasError('firstName','maxlength')">
                    El Nombre pude tener maximo 25 caracteres
                </ng-container>
            </mat-error>
        </mat-form-field>

        <mat-form-field class="mb-3 w-100" appearance="outline">
            <mat-label for="lastName">Apellido</mat-label>
            <input matInput id="lastName" type="text" placeholder="Apellido" formControlName="lastName">
            <mat-error>
                <ng-container *ngIf="controlHasError('lastName', 'required')">
                    El Apellido es obligatorio
                </ng-container>
                <ng-container *ngIf="controlHasError('lastName', 'minlength')">
                    El Apellido debe tener minimo 3 caracteres
                </ng-container>
                <ng-container *ngIf="controlHasError('lastName', 'maxlength')">
                    El Apellido puede tener maximo 25 caracteres
                </ng-container>
            </mat-error>
        </mat-form-field>

        <mat-form-field class="mb-2 w-100" appearance="outline">
            <mat-label for="descripcion">Email</mat-label>
            <input matInput id="email" type="text" placeholder="email" formControlName="email">
            <mat-error>
                <ng-container *ngIf="controlHasError('email', 'required')">
                    El Email es obligatorio
                </ng-container>
                <ng-container *ngIf="controlHasError('email', 'email')">
                    El Email debe tener un formato valido
                </ng-container>
            </mat-error>
        </mat-form-field>

        <mat-form-field class="mb-3 w-100" appearance="outline">
            <mat-label for="password">Password</mat-label>
            <input matInput id="password" type="text" placeholder="Password" formControlName="password">
            <mat-error>
                <ng-container *ngIf="controlHasError('password','required')">
                    El Password es obligatorio
                </ng-container>
                <ng-container *ngIf="controlHasError('password','pattern')">
                    El Password debe tener un formato valido
                </ng-container>
            </mat-error>
        </mat-form-field>

        <mat-form-field class="mb-3 w-100" appearance="outline">
            <mat-label for="role">Role</mat-label>
            <mat-select id="role" placeholder="Role" formControlName="role">
                <mat-option value="USER">USER</mat-option>
                <mat-option value="ADMIN">ADMIN</mat-option>
            </mat-select>
            <mat-error>
                <ng-container *ngIf="controlHasError('role','required')">
                    El Role es obligatorio
                </ng-container>
            </mat-error>
        </mat-form-field>

        <div class="text-end">
            <button mat-raised-button routerLink="/admin/users">
                Cancelar
            </button>
            <button class="ms-2" mat-raised-button color="primary">
                {{ user ? 'Actualizar ': 'Crear ' }} Usuario
            </button>
        </div>
    </form>
</div>